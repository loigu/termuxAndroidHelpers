#!/bin/bash

[ -z "$format" ] && format="worstaudio[protocol=https][format_note*=original]"
[ -z "$frag" ] && frag=20

[ "$1" = -f ] && force=1 && shift
id=$(echo "$1" |sed -e 's/.*\?v=\([^&]*\).*/\1/')
[ -z "$force" ] && grep "$id" ~/downloaded && echo "already downloaded ($id) pass -f " && exit 1

yt-dlp -c -f "$format" -N $frag --no-playlist --embed-metadata --embed-chapters "$@" && echo "$id" >> ~/downloaded

